<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One-to-One Catch-up Tool</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Monthly One-to-One Catch-up</h1>
            <p>A structured feedback session between manager and employee</p>
        </header>

        <div class="main-menu" id="mainMenu">
            <h2>One-to-One Catch-up Tool</h2>
            <p>Choose your action:</p>
            <div class="menu-buttons">
                <button onclick="showEmployeeForm()" class="btn-primary">Employee: Fill Ratings</button>
                <button onclick="showManagerForm()" class="btn-primary">Manager: Fill Ratings</button>
                <button onclick="showSessionSetup()" class="btn-secondary">Start Session</button>
                <button onclick="showHistory()" class="btn-secondary">View History</button>
            </div>
        </div>

        <div class="preparation-section" id="preparationSection" style="display: none;">
            <div class="prep-header">
                <h2 id="prepTitle">Employee Preparation</h2>
                <button onclick="backToMenu()" class="btn-secondary">Back to Menu</button>
            </div>
            
            <div class="input-group">
                <label for="prepName">Your Name:</label>
                <input type="text" id="prepName" placeholder="Enter your name">
            </div>
            
            <div class="input-group">
                <label for="prepPartner">Partner Name:</label>
                <input type="text" id="prepPartner" placeholder="Enter partner's name">
            </div>
            
            <div id="preparationForm"></div>
            
            <button onclick="savePreparation()" class="btn-primary" id="savePrep">Save My Ratings & Comments</button>
        </div>

        <div class="session-setup" id="sessionSetup" style="display: none;">
            <h2>Start Session</h2>
            <div class="input-group">
                <label for="sessionManager">Manager Name:</label>
                <input type="text" id="sessionManager" placeholder="Enter manager name">
            </div>
            <div class="input-group">
                <label for="sessionEmployee">Employee Name:</label>
                <input type="text" id="sessionEmployee" placeholder="Enter employee name">
            </div>
            <button onclick="startSession()" class="btn-primary">Start Catch-up Session</button>
            <button onclick="backToMenu()" class="btn-secondary">Back to Menu</button>
        </div>

        <div class="session-section" id="sessionSection" style="display: none;">
            <div class="session-header">
                <h2>Session: <span id="sessionTitle"></span></h2>
                <div class="session-progress">
                    Category <span id="categoryProgress"></span> of 6
                </div>
            </div>

            <div class="reveal-section">
                <h3 id="currentCategory"></h3>
                <p id="categoryDescription"></p>
                
                <div class="reveal-container">
                    <div class="employee-reveal" id="employeeReveal" style="display: none;">
                        <h4>Employee Response</h4>
                        <div class="rating-display">
                            <div class="rating-circle employee-circle">
                                <span id="employeeRatingValue"></span>
                            </div>
                        </div>
                        <div class="comment-display" id="employeeCommentDisplay"></div>
                        <button onclick="revealManager()" class="btn-primary">Reveal Manager Response</button>
                    </div>

                    <div class="manager-reveal" id="managerReveal" style="display: none;">
                        <h4>Manager Response</h4>
                        <div class="rating-display">
                            <div class="rating-circle manager-circle">
                                <span id="managerRatingValue"></span>
                            </div>
                        </div>
                        <div class="comment-display" id="managerCommentDisplay"></div>
                        
                        <div class="comparison-display">
                            <h5>Comparison</h5>
                            <div class="rating-difference" id="ratingDifference"></div>
                        </div>
                        
                        <button onclick="nextCategory()" id="nextBtn" class="btn-secondary">Next Category</button>
                    </div>
                </div>

                <button onclick="revealEmployee()" id="startRevealBtn" class="btn-primary">Reveal Employee Response</button>
            </div>
        </div>

        <div class="results-section" id="resultsSection" style="display: none;">
            <h2>Session Summary</h2>
            <div id="summaryTable"></div>
            <div class="action-buttons">
                <button onclick="exportToPDF()" class="btn-primary">Export to PDF</button>
                <button onclick="saveSession()" class="btn-secondary">Save Session</button>
                <button onclick="resetSession()" class="btn-primary">Start New Session</button>
            </div>
        </div>

        <div class="history-section" id="historySection" style="display: none;">
            <h2>Historical Ratings</h2>
            <div class="history-controls">
                <select id="historyFilter">
                    <option value="all">All Sessions</option>
                </select>
                <button onclick="closeHistory()" class="btn-secondary">Back to Setup</button>
            </div>
            <div id="historyContent"></div>
            <div id="comparisonChart"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>